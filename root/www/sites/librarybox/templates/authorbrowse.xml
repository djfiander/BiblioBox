<?xml version="1.0" encoding="UTF-8" ?>
<%!
    import queries
%>

<%
    start_response("200 OK", [('Content-Type', "application/atom+xml;profile=opds-catalog;kind=navigation")])
%>
<feed xmlns="http://www.w3.org/2005/Atom"
      xmlns:dc="http://purl.org/dc/terms/"
      xmlns:opds="http://opds-spec.org/2010/catalog">
  <id>urn:uuid:02807263-638b-42c9-8e68-cedae61640f7</id>
 
  <link rel="self"    
        href="/catalogue.py?authorbrowse.xml"
        type="application/atom+xml;profile=opds-catalog;kind=navigation" />
  <link rel="start"
	href="/catalogue.py?root.xml"
	type="application/atom+xml;profile=opds-catalogue;kind=navigation" />
  <link rel="up"
	href="/catalogue.py?root.xml"
	type="application/atom+xml;profile=opds-catalogue;kind=navigation" />

  <title>Browse by Author</title>
  <updated>2012-07-27T12:48:00Z</updated>
  <author>
    <name>David Fiander</name>
  </author>

% for author in queries.author_list(conn):
    <entry>
      <id>urn:uuid:${author['uuid']}</id>
      <title>${author['name']}</title>
      % if author['titlecount'] == 1:
          <content type="text"> ${author['titlecount']} title</content>
      % else:
          <content type="text"> ${author['titlecount']} titles</content>
      % endif
      <link rel="subsection"
	    href="/catalogue.py?author.xml&amp;au=${author['id']}"
	    type="application/atom+xml;profile=opds-catalogue;kind=navigation" />
    </entry>
% endfor
</feed>
